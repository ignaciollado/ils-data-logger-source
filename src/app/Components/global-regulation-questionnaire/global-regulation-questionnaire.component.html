<div class="container-form">
 <h1>Identificaci√≥n de requisitos legales idi: CUESTIONARIO PRELIMINAR</h1>
 <div class="questions-container">
  <form *ngIf="questionList" id="theQuestionnaire" [formGroup]="questionListFormTest"
                    (ngSubmit)="saveQuestionForm()">
    
    <mat-accordion *ngFor=" let vectors of questionList; index as j">
      <mat-expansion-panel> 
        <mat-expansion-panel-header>
          <mat-panel-title>
            <span color="warn">Vector: {{vectors.vectorName}}</span>
            <span>Total answered: {{totalVectorAnswers[j]}}</span>
            <span>Total questions: {{totalVectorQuestions[j]}}</span>
          </mat-panel-title>
          <mat-progress-bar mode="determinate" value="{{vectorProgress[j]}}"></mat-progress-bar>
      </mat-expansion-panel-header> 
      <ol>
        <li *ngFor="let question of vectors.questions; index as k">
          <h4>{{question.questionTextES}}:<button mat-flat-button (click)="openDialog('300ms', '300ms', question.questionTextES, question.questionTooltipES, question.questionDoc1, question.questionDoc2)"><i *ngIf="question.questionTooltipES" class="fa-solid fa-circle-info" style="color: #1f5618;"></i></button></h4>
          <ng-container [ngSwitch]="question.type">
              <ng-container *ngSwitchCase="'radio'">
                <mat-radio-group aria-label="Select an option" name="vector_{{j+1}}_Question{{k+1}}">
                  <ng-container  *ngFor="let item of question.answers; index as m">
                      <mat-radio-button 
                          (change) = "saveQuestionForm()"
                          value="{{item['regulation']}}"
                          id="vector_{{j+1}}_Question{{k+1}}_Answer{{m+1}}"
                          >
                          {{item['answerText']}}
                      </mat-radio-button>
                      <button *ngIf="item['answerTooltip']" mat-button (click)="openDialog('300ms', '300ms', item['answerText'], item['answerTooltip'], item['answerImage_1'], item['answerImage_2'])"><i class="fa-solid fa-circle-info" style="color: #673ab7;"></i></button>
                  </ng-container>
                </mat-radio-group>
              </ng-container>
              
              <ng-container *ngSwitchCase="'checkbox'">
                <section class="example-section" [formGroup]="">
                  <ng-container *ngFor="let item of question.answers; index as n">
                      <p>  
                        <mat-checkbox
                          (change) = "saveQuestionForm()"
                          value="{{item['regulation']}}"
                          name="vector_{{j+1}}_Question{{k+1}}"
                          id="vector_{{j+1}}_Question{{k+1}}_Answer{{n+1}}"
                          >
                          {{item['answerText']}}
                        </mat-checkbox>
                        <button *ngIf="item['answerTooltip']" mat-button (click)="openDialog('300ms', '300ms', item['answerText'], item['answerTooltip'], item['answerImage_1'], item['answerImage_2'])"><i class="fa-solid fa-circle-info" style="color: #673ab7;"></i></button>
                      </p>
                  </ng-container>
                </section>
              </ng-container>
          </ng-container>
      </li>
      </ol> 
      </mat-expansion-panel>  
    </mat-accordion>
   
   <div class="button-row">
    <button mat-raised-button color="primary">Enviar</button>
    <button mat-raised-button>Limpiar</button>
  </div>
  </form>
  <div class="results"></div>
 </div>
<span *ngIf="!questionList" class="loader">Loading questionnaire...</span>
</div>