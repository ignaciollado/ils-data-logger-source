<div class="container-form">
<h2>{{'answeredQuestionnairesList' | translate}}</h2>

<div class='card-container' *ngIf="userQuestionnaires">
  <mat-card *ngFor="let questionnaire of userQuestionnaires">
    <a [routerLink]="['/questionnaire-detail', questionnaire.id]" routerLinkActive="active" ariaCurrentWhenActive="page">
    <mat-card-header>
      <mat-card-title>
        {{questionnaire.companyDelegationName}}
      </mat-card-title>
      <mat-card-subtitle>
        <div>Ref. <strong>{{questionnaire.companyQuestionnaireId}}</strong></div>
        <span>{{"dateAnswered" | translate}}: {{questionnaire.updated_at| date :'short'}}</span>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content *ngFor="let completedItem of questionnaire.completed">
        <div><strong>{{completedItem.vectorName}}</strong></div>
        <div><span>{{"totalQuestions" | translate}}:</span> <strong>{{completedItem.totalQuestions}}</strong></div>
        <div>
          <span>{{"totalAnswers" | translate}}:</span> <strong>{{completedItem.totalAnswers | number: '1.2-2'}} %</strong>
          <mat-progress-bar mode="determinate" value="{{completedItem.totalAnswers}}"></mat-progress-bar>
        </div>
      <mat-divider></mat-divider>
    </mat-card-content>
    <mat-card-actions class="button-row">
<!--       <button mat-button color="primary" matTooltip="Detail"><a [routerLink]="['/questionnaire-detail', questionnaire.id]" routerLinkActive="active" ariaCurrentWhenActive="page"><i class="fa-solid fa-clipboard-list"></i></a></button> -->
      <button mat-button color="warn" matTooltip="Delete" (click)="deleteUserQuestionnaire(questionnaire.id)"><i class="fa-solid fa-trash"></i></button>
    </mat-card-actions>
  </a>
  </mat-card>
</div>


<span *ngIf="!userQuestionnaires" class="loader">{{'loadingQuestionnaire' | translate}}</span>
</div>