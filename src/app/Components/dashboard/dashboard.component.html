<div class="container-chart">

  <h2>{{ 'totalActivityReported' | translate }}:</h2>

  <mat-button-toggle-group name="charts" aria-label="Chart selection">
    <mat-button-toggle checked value="Energy" (click)="showChartEnergy()">{{aspectEnergy}}</mat-button-toggle>
    <mat-button-toggle value="Water" (click)="showChartWater()">{{aspectWater}}</mat-button-toggle>
    <mat-button-toggle value="Residue" (click)="showChartResidue()">{{aspectResidue}}</mat-button-toggle>
    <mat-button-toggle value="Emissions" (click)="showChartEmission()">{{aspectEmissions}}</mat-button-toggle>
  </mat-button-toggle-group>

  
  <div class="graph-container">
    <form
      *ngIf="energyForm"
      [formGroup]="energyForm"
      (ngSubmit)="chartEnergy()">
    <mat-card [class.mat-elevation-z8]="true">
      <section>
        <mat-form-field [style.width.px]=425>
          <mat-label>{{'year' | translate}}</mat-label>
          <mat-select [formControl]="yearEnergy">
            <mat-option value="2019">2019</mat-option>
            <mat-option value="2020">2020</mat-option>
            <mat-option value="2021">2021</mat-option>
            <mat-option value="2022">2022</mat-option>
            <mat-option value="2023">2023</mat-option>
            <mat-option value="2024">2024</mat-option>
            <mat-option value="2025">2025</mat-option>
          </mat-select>
        </mat-form-field>
      </section>

      <section>
            <mat-form-field [style.width.px]=425>
              <mat-label>{{'delegation' | translate}}</mat-label>
              <mat-select [formControl]="delegation" panelClass="panel-{{delegation.value}}">
                <mat-option *ngFor="let delegation of delegations" [value]="delegation.name">
                  {{delegation.name}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="delegation.hasError('required')">{{'delegation' | translate}} <strong>{{'isRequired' | translate}}</strong></mat-error>
            </mat-form-field>
      </section>

      <section>
            <mat-form-field [style.width.px]=425>
              <mat-label>{{'selectEnergy' | translate}}</mat-label>
              <mat-select [formControl]="energy">
                <mat-option *ngFor="let energy of energies" [value]="energy.nameES">
                  {{energy.nameES}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="energy.hasError('required')">{{'energyType' | translate}} <strong>{{'isRequired' | translate}}</strong></mat-error>
            </mat-form-field>
      </section>

      <button mat-raised-button color="primary" type="submit" [disabled]="!energyForm.valid">GRAPH</button>
    </mat-card>
  </form>
    <canvas id="graph" aria-label= "Activity graph" role="chart">{{ chart }}</canvas>
  </div>

  <app-modal></app-modal>

  
  <div class="loader" *ngIf="!consumptions">No data found yet...</div>

</div>


