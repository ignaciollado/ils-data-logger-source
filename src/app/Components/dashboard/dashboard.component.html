<div class="container-form">
  <h2>{{ 'totalActivityReported' | translate }}:</h2>
  <div id='filtroGraficas'>
    <form
      *ngIf="graphForm"
      [formGroup]="graphForm"
      (ngSubmit)="chartEnergy()">
      <div class='fields-container'>
        <mat-form-field [style.width.px]=225 class="item1">
          <mat-label>{{'aspect' | translate}}</mat-label>
          <mat-select [formControl]="aspect" (selectionChange)="updateFields($event)">
            <mat-option value="1">{{aspectEnergy}}</mat-option>
            <mat-option value="2">{{aspectWater}}</mat-option>
            <mat-option value="3">{{aspectResidue}}</mat-option>
            <mat-option value="5">{{aspectEmissions}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field [style.width.px]=200 class="item2">
          <mat-label>{{'delegation' | translate}}</mat-label>
          <mat-select [formControl]="delegation" panelClass="panel-{{delegation.value}}">
            <mat-option *ngFor="let delegation of delegations" [value]="delegation.name">
              {{delegation.name}}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="delegation.hasError('required')">{{'delegation' | translate}} <strong>{{'isRequired' | translate}}</strong></mat-error>
        </mat-form-field>

        <mat-form-field [style.width.px]=200 *ngIf="isEnergy" class="item4">
          <mat-label>{{'selectEnergy' | translate}}</mat-label>
            <mat-select [formControl]="energy" [disabled]="true">
              <mat-option *ngFor="let energy of energies" [value]="energy.nameES">
                {{energy.nameES}}
              </mat-option>
            </mat-select>
          <mat-error *ngIf="energy.hasError('required')">{{'energyType' | translate}} <strong>{{'isRequired' | translate}}</strong></mat-error>
        </mat-form-field>

        <mat-form-field [style.width.px]=225 *ngIf="isResidue" class="item5">
          <mat-label>{{'residueType' | translate}}</mat-label>
          <mat-select [formControl]="residue">
            <mat-option>
              <ngx-mat-select-search
              [formControl]="residueFilter"
              placeholderLabel="{{'searchResidue' | translate}}"
              noEntriesFoundLabel = "no matching residue found!"
              [clearSearchInput] = false
              [searching] = "isSearching"
              >
              <mat-icon ngxMatSelectSearchClear><i class="fa-solid fa-delete-left"></i></mat-icon>
            </ngx-mat-select-search>
            </mat-option>
                <mat-option *ngFor="let items of residuesItem" [value]="items.chapterItemId" class="small-data">
                  {{items.chapterItemId}} - <strong>{{items.chapterItemName}}</strong>
                </mat-option>
          </mat-select>
          <mat-error *ngIf="residue.hasError('required')">{{'residueType' | translate}} <strong>{{'isRequired' | translate}}</strong></mat-error>
        </mat-form-field>

       <!--  <mat-form-field [style.width.px]=100 class="item3">
          <mat-label>{{'year' | translate}}</mat-label>
          <mat-select [formControl]="yearGraph">
            <mat-option value="2019">2019</mat-option>
            <mat-option value="2020">2020</mat-option>
            <mat-option value="2021">2021</mat-option>
            <mat-option value="2022">2022</mat-option>
            <mat-option value="2023">2023</mat-option>
            <mat-option value="2024">2024</mat-option>
            <mat-option value="2025">2025</mat-option>
          </mat-select>
        </mat-form-field> -->

        <mat-button-toggle-group name="buttonsform" aria-label="buttons form reset and submit" class="item6">
          <button mat-raised-button color="accent" (click)="graphFormReset()">Reset</button>
          <button mat-raised-button color="primary" type="submit" [disabled]="!graphForm.valid">Graph</button>
        </mat-button-toggle-group>

      </div>
    </form>
  </div>

    <canvas id="graph" aria-label= "Activity graph" role="chart">{{ chart }}</canvas>
  <app-modal></app-modal>
  <div class="loader" *ngIf="!consumptions">No data found yet...</div>
</div>


